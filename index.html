<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>๐๏ธ Training Manager</title>
    <link rel="icon" type="image/png" href="Training Manager icon.png">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <script src="https://unpkg.com/pdf-lib/dist/pdf-lib.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>

<body>
    <header class="app-header no-print">
        <h1 class="app-title">๐๏ธ Training Manager</h1>
        <h1 class="app-title">ุฃุณุชุบูุฑ ุงููู </h1>
    </header>
    <div class="container">
        <section class="input-section no-print">
            <h2>๐ฅ ุฃุฏุฎู ุฎุทุฉ ุงูุชูุฑูู</h2>

            <div class="ai-controls">
                <div class="mode-toggles">
                    <button class="mode-btn active" id="btnManual" onclick="setMode('manual')">โ๏ธ Manual</button>
                    <button class="mode-btn" id="btnAI" onclick="setMode('ai')">๐ค Auto</button>

                    <button class="settings-btn" onclick="toggleSettings()" title="ุฅุนุฏุงุฏุงุช API">โ๏ธ</button>
                </div>

                <div id="aiSettings" class="ai-settings" style="display: none;">
                    <input type="password" id="apiKey" placeholder="ุฃุฏุฎู ููุชุงุญ Gemini API ููุง" onchange="saveApiKey()"
                        oncopy="return false;" oncut="return false;" onpaste="return true;"
                        style="user-select: none; -webkit-user-select: none;">
                </div>

                <div id="aiInputContainer" style="display: none;">
                    <label for="aiInputText"
                        style="color: #FFD700; font-weight: bold; display: block; margin-bottom: 5px;">๐ ุจูุงูุงุช ุงูุนููู
                        (ุงูุตู ููุง):</label>
                    <textarea id="aiInputText" class="ai-input-area"
                        placeholder="ุฃุฏุฎู ุงุณุชุจูุงู ุงูุนููู ููุง..."></textarea>
                    <button onclick="generateWorkout()" class="generate-btn">โจ ุชูููุฏ ุงูุฎุทุฉ (Generate) โจ</button>
                </div>
            </div>

            <div class="controls">
                <button onclick="render()">ุชุญุฏูุซ ุงููุนุงููุฉ ๐</button>
                <button onclick="clearAll()" class="danger">ูุณุญ ุงููู ๐๏ธ</button>
                <button onclick="window.print()">ุทุจุงุนุฉ / PDF ๐จ๏ธ</button>
            </div>
            <textarea id="inputText" placeholder="ุงูุตู ุงูุฎุทุฉ ููุง..."></textarea>
        </section>

        <section class="input-section no-print" style="border-color: #00ff99;">
            <h2>๐ ุฏูุฌ ูุน ููู PDF ุงูุฑุฆูุณู</h2>
            <div class="controls" style="align-items: center; flex-wrap: wrap;">
                <div style="display: flex; flex-direction: column; gap: 5px;">
                    <label style="color: #a0aec0;">ููู PDF ุงูุฑุฆูุณู:</label>
                    <div id="masterStatus" style="color: #00ff99; font-weight: bold;">ุฌุงุฑู ุงูุชุญูู ูู ุงูููู...</div>
                    <input type="file" id="manualMasterPdf" accept="application/pdf"
                        style="display: none; margin-top: 5px;" onchange="handleManualFile(this)">
                    <button id="manualSelectBtn" onclick="document.getElementById('manualMasterPdf').click()"
                        style="background: #3182ce; font-size: 0.9rem; padding: 5px 10px;">๐ ุงุฎุชุฑ ุงูููู
                        ูุฏููุงู</button>
                </div>

                <div style="display: flex; flex-direction: column; gap: 5px;">
                    <label for="insertPage" style="color: #a0aec0;">ุฅุฏุฑุงุฌ ุจุนุฏ ุงูุตูุญุฉ ุฑูู:</label>
                    <input type="number" id="insertPage" value="7"
                        style="background: var(--input-bg); color: white; border: 1px solid var(--accent-color); padding: 8px; border-radius: 6px; width: 80px; text-align: center;">
                </div>

                <div style="margin-right: auto;">
                    <button onclick="mergeAndDownload()"
                        style="background: linear-gradient(45deg, #00ff99, #001e50); color: white; border-color: #00ff99;">
                        ุฏูุฌ ูุชุญููู ุงูููู ุงูููุงุฆู ๐
                    </button>
                </div>
            </div>
            <a id="downloadLink" style="display:none;"></a>
            <div id="msg" style="margin-top: 10px; font-weight: bold;"></div>
        </section>

        <section id="output" class="output-section">
        </section>
    </div>

    <!-- Custom Context Menu -->
    <div id="customContextMenu" class="context-menu" style="display: none;">
        <ul>
            <li onclick="execCommand('cut')">โ๏ธ Cut (ูุต)</li>
            <li onclick="execCommand('copy')">๐ Copy (ูุณุฎ)</li>
            <li onclick="execCommand('paste')">๐ฅ Paste (ูุตู)</li>
        </ul>
    </div>

    <script src="bg_data.js"></script>
    <script src="exercises-data.js"></script>
    <script src="ai_prompt.js"></script>
    <script src="script.js"></script>
</body>

</html>